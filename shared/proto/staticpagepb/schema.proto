syntax = "proto3";

package staticpagepb;

import "commonpb/ads_platform.proto";
import "commonpb/page_type.proto";
import "commonpb/seo.proto";
import "commonpb/status.proto";
import "google/protobuf/timestamp.proto";

// ========================
// ENTITY
// ========================

message StaticPage {
  uint64 id = 1;
  string title = 2;
  string slug = 3;
  string content = 4;
  commonpb.PageType page_type = 5;
  int32 sort_order = 6;
  optional commonpb.SEO seo = 7;
  commonpb.AdsPlatform ads_platform = 8;
  commonpb.Status status = 9;

  uint64 created_by = 10;
  uint64 updated_by = 11;
  google.protobuf.Timestamp created_at = 12;
  google.protobuf.Timestamp updated_at = 13;

  int32 deleted_version = 14;
}

// ========================
// CREATE
// ========================

message CreateRequest {
  StaticPage page = 1;
}

message CreateResponse {
  uint64 id = 1;
}

// ========================
// UPDATE (with field mask)
// ========================

message UpdateRequest {
  StaticPage page = 1;

  repeated string fields = 2;
}

message UpdateResponse {
  uint64 id = 1;
}

// ========================
// DELETE (batch)
// ========================

message DeleteRequest {
  repeated uint64 ids = 1;
  uint64 deleted_by = 2;
}

message DeleteResponse {
  repeated uint64 ids = 1;
}

// ========================
// LIST
// ========================

message ListRequest {
  repeated uint64 ids = 1;
  string title = 2;
  string slug = 3;
  repeated int32 page_types = 4;
  repeated int32 ads_platforms = 5;
  repeated int32 statuses = 6;

  repeated string fields = 7; // select fields

  optional bool is_deleted = 8;

  string order_by = 9;

  uint32 limit = 10;
  uint32 offset = 11;

  bool with_total = 12;
}

message ListResponse {
  repeated StaticPage pages = 1;
  uint64 total = 2;
}

// ========================
// DETAIL (single)
// ========================

message GetRequest {
  uint64 id = 1;
  string slug = 2;

  // optionally override columns
  string select = 3;
}

message GetResponse {
  StaticPage page = 1;
}
