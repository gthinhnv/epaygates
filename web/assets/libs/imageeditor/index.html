<!DOCTYPE html>
<html lang="en">

<head>
	<title>Bootstrap Example</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" crossorigin="anonymous">
	<link rel="stylesheet" href="./cropperjs/cropper.min.css">
	<link rel="stylesheet" href="./imageeditor.css">
</head>

<body>

	<div class="container">
		<div id="image-editor-demo" class="image-editor">
			<img class="image-source" src="https://i.imgur.com/fHyEMsl.jpg" crossorigin="anonymous" />
			<div class="image-editor-toolbar text-center"></div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
	<script src="./cropperjs/cropper.min.js"></script>
	<script src="./imageeditor.js"></script>
	<script>
		const REGEXP_MIME_TYPE_IMAGES = /^image\/\w+$/;
		new ImageEditor(document.querySelector('#image-editor-demo'), {
			toolbar: {
				crop: true,
				cropRatios: ['16:9', '4:5'],
				rotate: true
			}
		});
		$(document.querySelector('#image-editor-demo')).find('.file-1').change(function (e) {
			fileChange(e);
		});

		function fileChange({ target }) {
			const { files } = target;
			if (files && files.length > 0) {
				this.readFile(files[0]).then((data) => {
					target.value = '';
					$(document.querySelector('#image-editor-demo')).find('.image-source').attr('src', data.url);
					new ImageEditor(document.querySelector('#image-editor-demo'), {
						toolbar: {
							crop: true,
							cropRatios: ['16:9', '4:5'],
							rotate: true
						}
					});
				}).catch((e) => {
					target.value = '';
					this.alert(e);
				});
			}
		}
	</script>
</body>

</html>